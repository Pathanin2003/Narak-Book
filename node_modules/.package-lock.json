<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Bookstore</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo">Narak Bookstore</h1>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#books">Books</a></li>
                    <li>
                        <input type="text" id="search-input" placeholder="Search books...">
                        <button id="search-button">Search</button>
                    </li>
                    <li><a href="#cart">Cart </a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
<section id="home" class="hero">
    <div class="container">
        <img src="img/Yoyo.jpg" alt="Book Cover">
        <div class="hero-text">
            <h2>Welcome to Narak Bookstore</h2>
            <p>Your one-stop shop for all your reading needs.</p>
        </div>
    </div>
</section>

 <!-- Books Section -->
<section id="books" class="books">
    <div class="container">
        <h2>Narak Books</h2>
        <div class="book-list">
            <!-- Book Item 1 -->
            <div class="book-item">
                <img src="img/Narak.jpg" alt="Book Cover">
                <h3>นิยายรักคั่นเวลา</h3>
                <p>Author: Author Name</p>
                <p class="price">150฿</p>
                <button class="add-to-cart" data-title="นิยายรักคั่นเวลา" data-price="150" data-image="img/Narak.jpg">Add to Cart</button>
            </div>                
            <!-- Book Item 2 -->
            <div class="book-item">
                <img src="img/Mainarak.jpg" alt="Book Cover">
                <h3>นิยายเรื่องนี้ฉันขอไม่เล่น</h3>
                <p>Author: Author Name</p>
                <p class="price">150฿</p>
                <button class="add-to-cart" data-title="นิยายเรื่องนี้ฉันขอไม่เล่น" data-price="150" data-image="img/Mainarak.jpg">Add to Cart</button>
            </div>
            <!-- Book Item 3 -->
            <div class="book-item">
                <img src="img/Soi.jpg" alt="Book Cover">
                <h3>นอกชายคา น่าอาศัย</h3>
                <p>Author: Author Name</p>
                <p class="price">150฿</p>
                <button class="add-to-cart" data-title="นอกชายคา น่าอาศัย" data-price="150" data-image="img/Soi.jpg">Add to Cart</button>
            </div>
        </div>
    </div>
</section>

<!-- Cart Section -->
<section id="cart" class="cart">
    <div class="container">
        <h2>Your Cart</h2>
        <div id="cart-items">
            <p>Your cart is empty.</p>
        </div>
        <div id="cart-total">
            <h3>Total: 0฿</h3>
            <button id="checkout-btn">Proceed to Checkout</button>
        </div>
    </div>
</section>

<!-- JavaScript -->
<script>
let cart = []; // ตัวแปรเก็บรายการสินค้าในตะกร้า

// ฟังก์ชันอัปเดตตะกร้าสินค้า
function updateCart() {
    const cartItemsContainer = document.getElementById('cart-items');
    const cartTotalContainer = document.getElementById('cart-total').querySelector('h3');
    cartItemsContainer.innerHTML = ''; // ล้างข้อมูลเก่าในตะกร้า

    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p>Your cart is empty.</p>'; // ถ้าตะกร้าว่าง
    } else {
        let total = 0; // ตัวแปรสำหรับเก็บราคารวม
        cart.forEach((item, index) => {
            const cartItem = document.createElement('div'); // สร้าง div สำหรับสินค้าแต่ละชิ้น
            cartItem.classList.add('cart-item');
            
            // สร้าง image ของหนังสือ
            const bookImage = document.createElement('img');
            bookImage.src = item.image;
            bookImage.alt = item.title;
            bookImage.classList.add('cart-item-image');

            // สร้าง div สำหรับรายละเอียดสินค้า
            const itemDetails = document.createElement('div');
            itemDetails.innerHTML = `<strong>${item.title}</strong> - ${item.price}฿ x ${item.quantity}`;
            
            // ปุ่มเพิ่ม/ลดจำนวนสินค้า
            const quantityControls = document.createElement('div');
            const incrementButton = document.createElement('button');
            incrementButton.textContent = '+';
            incrementButton.addEventListener('click', () => incrementQuantity(index));

            const decrementButton = document.createElement('button');
            decrementButton.textContent = '-';
            decrementButton.addEventListener('click', () => decrementQuantity(index));

            quantityControls.appendChild(decrementButton);
            quantityControls.appendChild(incrementButton);

            // เพิ่มองค์ประกอบเข้าใน cart-item
            cartItem.appendChild(bookImage);
            cartItem.appendChild(itemDetails);
            cartItem.appendChild(quantityControls);

            cartItemsContainer.appendChild(cartItem);

            total += parseFloat(item.price) * item.quantity; // คำนวณราคารวม
        });
        cartTotalContainer.textContent = `Total: ${total.toFixed(2)}฿`; // แสดงราคารวม
    }
}

// ฟังก์ชันจัดการเมื่อคลิกปุ่ม Add to Cart
function handleAddToCart(event) {
    const button = event.target;
    const title = button.getAttribute('data-title');
    const price = button.getAttribute('data-price');
    const image = button.getAttribute('data-image');
    
    // ตรวจสอบว่าสินค้าอยู่ในตะกร้าแล้วหรือไม่
    const existingItemIndex = cart.findIndex(item => item.title === title);
    if (existingItemIndex > -1) {
        // ถ้าอยู่แล้ว เพิ่มจำนวนสินค้า
        cart[existingItemIndex].quantity++;
    } else {
        // ถ้าไม่อยู่ในตะกร้า เพิ่มสินค้าใหม่
        cart.push({ title, price, image, quantity: 1 });
    }

    // อัปเดตตะกร้าสินค้า
    updateCart();

    // เลื่อนไปยังส่วนตะกร้า
    window.location.href = '#cart';
}

// ฟังก์ชันเพิ่มจำนวนสินค้า
function incrementQuantity(index) {
    cart[index].quantity++;
    updateCart();
}

// ฟังก์ชันลดจำนวนสินค้า
function decrementQuantity(index) {
    if (cart[index].quantity > 1) {
        cart[index].quantity--;
    } else {
        cart.splice(index, 1); // ลบสินค้าถ้าเหลือจำนวน 0
    }
    updateCart();
}

// เพิ่ม event listener ให้กับทุกปุ่ม Add to Cart
document.addEventListener('DOMContentLoaded', () => {
    const addToCartButtons = document.querySelectorAll('.add-to-cart');
    addToCartButtons.forEach(button => {
        button.addEventListener('click', handleAddToCart);
    });
});
</script>


    <!-- Footer Section -->
    <footer>
        <div class="container">
            <p>&copy; 2024 My Bookstore. All rights reserved.</p>
        </div>
    </footer>
    
    <button class="add-to-cart" data-title="นิยายรักคั่นเวลา" data-price="150">Add to Cart</button>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>
<!-- CSS สำหรับปรับขนาดรูปภาพและปุ่ม -->
<style>
    /* ปรับขนาดรูปภาพในตะกร้า */
    .cart-item-image {
        width: 100px;  /* กำหนดความกว้างของภาพให้พอดี */
        height: auto;  /* รักษาสัดส่วนของภาพ */
        margin-right: 10px;  /* เพิ่มระยะห่างระหว่างภาพกับข้อความ */
    }

    /* ปรับขนาดปุ่มบวกลบ */
    .cart-item button {
        font-size: 18px;  /* ขนาดตัวอักษรของปุ่มบวก-ลบ */
        padding: 5px 10px;  /* ระยะห่างภายในปุ่ม */
        margin: 0 5px;  /* ระยะห่างระหว่างปุ่มบวก-ลบ */
        cursor: pointer;  /* เปลี่ยนเคอร์เซอร์เมื่อ hover */
    }

    /* ปรับรูปแบบการแสดงผลของรายการในตะกร้า */
    .cart-item {
        display: flex;
        align-items: center;
        margin-bottom: 10px;  /* เพิ่มระยะห่างระหว่างแต่ละรายการ */
    }

    /* ปรับรายละเอียดของสินค้า */
    .cart-item div {
        margin-left: 10px;
        flex-grow: 1;
    }

    /* สไตล์ตะกร้า */
    #cart-items {
        padding: 20px;
        border: 1px solid #ddd;
        background-color: #f9f9f9;
        max-width: 600px;
        margin: 0 auto;
    }

    /* สไตล์ปุ่ม checkout */
    #checkout-btn {
        display: inline-block;
        padding: 10px 20px;
        font-size: 18px;
        background-color: #28a745;
        color: #fff;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        margin-top: 10px;
    }

    /* เมื่อ hover ที่ปุ่ม checkout */
    #checkout-btn:hover {
        background-color: #218838;
    }
</style>

<!-- Books Section -->
<section id="books" class="books">
    <div class="container">
        <h2>Narak Books</h2>
        <div class="book-list">
            <!-- Book Item 1 -->
            <div class="book-item">
                <img src="img/Narak.jpg" alt="Book Cover">
                <h3>นิยายรักคั่นเวลา</h3>
                <p>Author: Author Name</p>
                <p class="price">150฿</p>
                <button class="add-to-cart" data-title="นิยายรักคั่นเวลา" data-price="150" data-image="img/Narak.jpg">Add to Cart</button>
            </div>                
            <!-- Book Item 2 -->
            <div class="book-item">
                <img src="img/Mainarak.jpg" alt="Book Cover">
                <h3>นิยายเรื่องนี้ฉันขอไม่เล่น</h3>
                <p>Author: Author Name</p>
                <p class="price">150฿</p>
                <button class="add-to-cart" data-title="นิยายเรื่องนี้ฉันขอไม่เล่น" data-price="150" data-image="img/Mainarak.jpg">Add to Cart</button>
            </div>
            <!-- Book Item 3 -->
            <div class="book-item">
                <img src="img/Soi.jpg" alt="Book Cover">
                <h3>นอกชายคา น่าอาศัย</h3>
                <p>Author: Author Name</p>
                <p class="price">150฿</p>
                <button class="add-to-cart" data-title="นอกชายคา น่าอาศัย" data-price="150" data-image="img/Soi.jpg">Add to Cart</button>
            </div>
        </div>
    </div>
</section>

<!-- Cart Section -->
<section id="cart" class="cart">
    <div class="container">
        <h2>Your Cart</h2>
        <div id="cart-items">
            <p>Your cart is empty.</p>
        </div>
        <div id="cart-total">
            <h3>Total: 0฿</h3>
            <button id="checkout-btn">Proceed to Checkout</button>
        </div>
    </div>
</section>

<!-- JavaScript -->
<script>
let Cart = []; // ตัวแปรเก็บรายการสินค้าในตะกร้า

// ฟังก์ชันอัปเดตตะกร้าสินค้า
function updateCart() {
    const cartItemsContainer = document.getElementById('cart-items');
    const cartTotalContainer = document.getElementById('cart-total').querySelector('h3');
    cartItemsContainer.innerHTML = ''; // ล้างข้อมูลเก่าในตะกร้า

    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p>Your cart is empty.</p>'; // ถ้าตะกร้าว่าง
    } else {
        let total = 0; // ตัวแปรสำหรับเก็บราคารวม
        cart.forEach((item, index) => {
            const cartItem = document.createElement('div'); // สร้าง div สำหรับสินค้าแต่ละชิ้น
            cartItem.classList.add('cart-item');
            
            // สร้าง image ของหนังสือ
            const bookImage = document.createElement('img');
            bookImage.src = item.image;
            bookImage.alt = item.title;
            bookImage.classList.add('cart-item-image');

            // สร้าง div สำหรับรายละเอียดสินค้า
            const itemDetails = document.createElement('div');
            itemDetails.innerHTML = `<strong>${item.title}</strong> - ${item.price}฿ x ${item.quantity}`;
            
            // ปุ่มเพิ่ม/ลดจำนวนสินค้า
            const quantityControls = document.createElement('div');
            const incrementButton = document.createElement('button');
            incrementButton.textContent = '+';
            incrementButton.addEventListener('click', () => incrementQuantity(index));

            const decrementButton = document.createElement('button');
            decrementButton.textContent = '-';
            decrementButton.addEventListener('click', () => decrementQuantity(index));

            quantityControls.appendChild(decrementButton);
            quantityControls.appendChild(incrementButton);

            // เพิ่มองค์ประกอบเข้าใน cart-item
            cartItem.appendChild(bookImage);
            cartItem.appendChild(itemDetails);
            cartItem.appendChild(quantityControls);

            cartItemsContainer.appendChild(cartItem);

            total += parseFloat(item.price) * item.quantity; // คำนวณราคารวม
        });
        cartTotalContainer.textContent = `Total: ${total.toFixed(2)}฿`; // แสดงราคารวม
    }
}

// ฟังก์ชันจัดการเมื่อคลิกปุ่ม Add to Cart
function handleAddToCart(event) {
    const button = event.target;
    const title = button.getAttribute('data-title');
    const price = button.getAttribute('data-price');
    const image = button.getAttribute('data-image');
    
    // ตรวจสอบว่าสินค้าอยู่ในตะกร้าแล้วหรือไม่
    const existingItemIndex = cart.findIndex(item => item.title === title);
    if (existingItemIndex > -1) {
        // ถ้าอยู่แล้ว เพิ่มจำนวนสินค้า
        cart[existingItemIndex].quantity++;
    } else {
        // ถ้าไม่อยู่ในตะกร้า เพิ่มสินค้าใหม่
        cart.push({ title, price, image, quantity: 1 });
    }

    // อัปเดตตะกร้าสินค้า
    updateCart();

    // เลื่อนไปยังส่วนตะกร้า
    window.location.href = '#cart';
}

// ฟังก์ชันเพิ่มจำนวนสินค้า
function incrementQuantity(index) {
    cart[index].quantity++;
    updateCart();
}

// ฟังก์ชันลดจำนวนสินค้า
function decrementQuantity(index) {
    if (cart[index].quantity > 1) {
        cart[index].quantity--;
    } else {
        cart.splice(index, 1); // ลบสินค้าถ้าเหลือจำนวน 0
    }
    updateCart();
}

// เพิ่ม event listener ให้กับทุกปุ่ม Add to Cart
document.addEventListener('DOMContentLoaded', () => {
    const addToCartButtons = document.querySelectorAll('.add-to-cart');
    addToCartButtons.forEach(button => {
        button.addEventListener('click', handleAddToCart);
    });
});
</script>
